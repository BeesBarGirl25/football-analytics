{% extends 'base.html' %}

{% block title %}Match Analysis{% endblock %}

{% block dropdowns %}
    {% include 'partials/competition_dropdowns.html' %}
{% endblock %}

{% block content %}
<div class="analysis-container">
    <div class="analysis-nav">
        <button class="tab-btn active" data-tab="overview">Overview</button>
        <button class="tab-btn" data-tab="home">Home Team</button>
        <button class="tab-btn" data-tab="away">Away Team</button>
        <button class="tab-btn" data-tab="player">Player</button>
    </div>

    <div class="analysis-content" id="overview">
        <div id="graphs-container" class="graphs-container">

            <div id="graph-container-1" class="graph-container medium hidden">
                <!-- Optional graph content -->
            </div>

            <div id="graph-container-2" class="graph-container tall hidden">
                <div class="graph-inner">

                    <div id="match-summary">
                        <div class="score-header">
                            <h3 id="combined-score-header">
                                <span id="home-team-name" class="home-team-name"></span>
                                <span id="home-team-score" class="team-score"></span>
                                <span id="score-seperator" class="score-seperator"></span>
                                <span id="away-team-score" class="team-score"></span>
                                <span id="away-team-name" class="away-team-name"></span>
                            </h3>
                            <p id="extra-details"></p>
                        </div>
                    </div>

                    <div class="team-tables">
                        <div class="team-table">
                            <table id="home-team-table">
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="team-table">
                            <table id="away-team-table">
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </div>

            <div id="graph-container-3" class="graph-container medium hidden">
            </div>
            <div id="graph-container-4" class="graph-container tall hidden">
                <div class="graph-inner vertical">
                    <div class="dominance-toggle-buttons">
                        <button class="toggle-btn active" data-view="dominance_heatmap_full">Full Match</button>
                        <button class="toggle-btn" data-view="dominance_heatmap_first">1st Half</button>
                        <button class="toggle-btn" data-view="dominance_heatmap_second">2nd Half</button>
                    </div>
                    <div id="dominance-plot-container" class="plotly-wrapper"></div>
                </div>
            </div>






        </div>
    </div>

    <div class="analysis-content hidden" id="home">Home team analysis goes here.</div>
    <div class="analysis-content hidden" id="away">Away team analysis goes here.</div>
    <div class="analysis-content hidden" id="player">Player analysis goes here.</div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('.searchable-dropdown').select2();
    });
</script>
<script src="{{ url_for('static', filename='js/match_analysis.js') }}"></script>
{% endblock %}
