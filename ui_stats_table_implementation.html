<!-- Updated match_team_analysis.html template -->
<div id="graph-container-{{ prefix }}" class="graph-container tall hidden" data-plot-group="{{ prefix }}">
    <div class="team-analysis-layout">
        <!-- Stats Table Sidebar -->
        <div class="team-stats-sidebar">
            <div class="stats-header">
                <h4>Team Stats</h4>
            </div>
            <div id="{{ prefix }}-stats-container" class="stats-table-container">
                <div class="stats-loading">Loading stats...</div>
            </div>
        </div>
        
        <!-- Heatmap Area -->
        <div class="heatmap-area">
            <div class="graph-inner vertical heatmap-layout">
                <!-- Compact top bar with all controls -->
                <div class="heatmap-controls-bar" data-team="{{ prefix }}">
                    <div class="control-group half-controls">
                        <button class="toggle-btn active" data-half="full">Full Match</button>
                        <button class="toggle-btn" data-half="first">1st Half</button>
                        <button class="toggle-btn" data-half="second">2nd Half</button>
                    </div>
                    <div class="control-separator"></div>
                    <div class="control-group phase-controls">
                        <button class="phase-btn active" data-phase="possession">Possession</button>
                        <button class="phase-btn" data-phase="attack">Attack</button>
                        <button class="phase-btn" data-phase="defense">Defense</button>
                    </div>
                </div>

                <!-- Plot area takes remaining space -->
                <div id="{{ plot_container_id }}" class="plotly-wrapper heatmap-plot"></div>
            </div>
        </div>
    </div>
</div>
